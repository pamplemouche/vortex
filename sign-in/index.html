<!DOCTYPE html>
<html>
  <head>
    
  </head>
  <body><!-- FORMULAIRE HTML -->
<form id="userStudentForm">
  <label for="username">Nom D'utilisateur :</label>
  <input type="text" id="nom" name="nom" required>
  <label for="password">Mot De Passe :</label>
  <input type="password" id="password" name="password" required>
  <label for="email">Email :</label>
  <input type="email" id="email" name="email" required>
  <label for="age">Age :</label>
  <input type="number" id="age" name="age" required>
  <button type="submit">Envoyer</button>
</form>
<div id="response"></div>

<script>
// Ajouter un utilisateur
// Ajouter un utilisateur via le formulaire
document.getElementById('userStudentForm').addEventListener('submit', function(e) {
  e.preventDefault(); // Empêche le rechargement de la page

  const form = e.target;
  const formData = new URLSearchParams({
    action: 'addUserStudent',
    nom: form.nom.value,
    password: form.password.value,
    email: form.email.value,
    age: form.age.value
  });

  fetch('https://script.google.com/macros/s/AKfycbyLv2W1E3VlRUAIgK9FUoa5guMTJKL8cvETJKIJ8ubG5VnSno-8QfyLGWxd1v_zCsX4bg/exec', {
    method: 'POST',
    body: formData
  })
  .then(res => res.text())
  .then(data => {
    document.getElementById('response').textContent = data; // Affiche la réponse dans la div
    form.reset(); // Réinitialise le formulaire
  })
  .catch(err => {
    document.getElementById('response').textContent = 'Erreur : ' + err;
  });
});

// Modifier un utilisateur
fetch('https://script.google.com/macros/s/AKfycbyLv2W1E3VlRUAIgK9FUoa5guMTJKL8cvETJKIJ8ubG5VnSno-8QfyLGWxd1v_zCsX4bg/exec', {
  method: 'POST',
  body: new URLSearchParams({
    action: 'updateUserStudent',
    email: 'jean@ex.com',
    nom: 'Jean Nouveau',
    age: 25
  })
})
.then(res => res.text())
.then(alert);

// Supprimer un utilisateur
fetch('https://script.google.com/macros/s/AKfycbyLv2W1E3VlRUAIgK9FUoa5guMTJKL8cvETJKIJ8ubG5VnSno-8QfyLGWxd1v_zCsX4bg/exec', {
  method: 'POST',
  body: new URLSearchParams({
    action: 'deleteUserStudent',
    email: 'jean@ex.com'
  })
})
.then(res => res.text())
.then(alert);

// Lister tous les utilisateurs
fetch('https://script.google.com/macros/s/AKfycbyLv2W1E3VlRUAIgK9FUoa5guMTJKL8cvETJKIJ8ubG5VnSno-8QfyLGWxd1v_zCsX4bg/exec', { method: 'GET' })
  .then(res => res.json())
  .then(console.log);
</script>
  </body>
</html>
